{"name":"Audio MODEM","tagline":"Audio Modem Communication Library","body":"Audio Modem Communication Library\r\n=================================\r\n\r\nDescription\r\n-----------\r\n\r\nThis program can be used to transmit a specified file between 2 computers, using\r\na simple audio cable (for better SNR and higher speeds) or a simple headset,\r\nallowing true air-gapped communication (via a speaker and a microphone).\r\n\r\nThe sender modulates an input binary data file into an audio signal,\r\nwhich is played to the sound card.\r\n\r\nThe receiver side records the transmitted audio,\r\nwhich is demodulated concurrently into an output binary data file.\r\n\r\nThe process requires a single manual calibration step: the transmitter has to\r\nfind maximal output volume for its sound card, which will not saturate the\r\nreceiving microphone.\r\n\r\nThe modem is using OFDM over an audio cable with the following parameters:\r\n\r\n- Sampling rate: 8/16/32 kHz\r\n- Baud rate: 1 kHz\r\n- Symbol modulation: BPSK, 4-PSK, 16-QAM ,64-QAM, 256-QAM\r\n- Carriers: 2-11 kHz (up to ten carriers)\r\n\r\nThis way, modem may achieve 80kbps bitrate = 10 kB/s (for best SNR).\r\n\r\nA simple CRC-32 checksum is used for data integrity verification\r\non each 250 byte data frame.\r\n\r\n\r\nInstallation\r\n------------\r\n\r\nMake sure that ``numpy`` and ``PortAudio v19`` packages are installed (on Debian):\r\n\r\n    $ sudo apt-get install python-numpy portaudio19-dev\r\n\r\nGet the latest released version from PyPI:\r\n\r\n    $ pip install --user amodem\r\n\r\nOr, try the latest (unstable) development version from GitHub:\r\n\r\n    $ git clone https://github.com/romanz/amodem.git\r\n    $ cd amodem\r\n    $ pip install --user -e .\r\n\r\nFor graphs and visualization (optional), install `matplotlib` Python package.\r\n\r\nFor validation, run:\r\n\r\n    $ export BITRATE=48  # explicitly select high MODEM bit rate (assuming good SNR).\r\n    $ amodem -h\r\n    usage: amodem [-h] {send,recv} ...\r\n\r\n    Audio OFDM MODEM: 48.0 kb/s (64-QAM x 8 carriers) Fs=32.0 kHz\r\n\r\n    positional arguments:\r\n      {send,recv}\r\n        send         modulate binary data into audio signal.\r\n        recv         demodulate audio signal into binary data.\r\n\r\n    optional arguments:\r\n      -h, --help     show this help message and exit\r\n\r\n\r\nCalibration\r\n-----------\r\n\r\nConnect the audio cable between the sender and the receiver, and run the\r\nfollowing scripts:\r\n\r\nOn the sender's side:\r\n\r\n    ~/sender $ export BITRATE=48  # explicitly select high MODEM bit rate (assuming good SNR).\r\n    ~/sender $ amodem send --calibrate\r\n\r\nOn the receiver's side:\r\n\r\n    ~/receiver $ export BITRATE=48  # explicitly select high MODEM bit rate (assuming good SNR).\r\n    ~/receiver $ amodem recv --calibrate\r\n\r\nIf BITRATE is not set, the MODEM will use 1 kbps settings (single frequency with BPSK modulation).\r\n\r\nChange the sender computer's output audio level, until\r\nall frequencies are received well:\r\n\r\n      3000 Hz: good signal\r\n      4000 Hz: good signal\r\n      5000 Hz: good signal\r\n      6000 Hz: good signal\r\n      7000 Hz: good signal\r\n      8000 Hz: good signal\r\n      9000 Hz: good signal\r\n     10000 Hz: good signal\r\n\r\n\r\nIf the signal is \"too weak\", increase the sender's output audio level.\r\n\r\nIf the signal is \"too strong\", decrease the sender's output audio level.\r\n\r\nIf the signal is \"too noisy\", it may be that the noise level is too high\r\nor that the analog signal is being distorted.\r\nPlease run the following command during the calibration session,\r\nand send me the resulting ``audio.raw`` file for debugging:\r\n\r\n    ~/receiver $ arecord --format=S16_LE --channels=1 --rate=32000 audio.raw\r\n\r\nYou can see a video of the calibration process [here](http://www.youtube.com/watch?v=jRUj2Ifk-Po).\r\n\r\nUsage\r\n-----\r\n\r\nPrepare the sender (generate a random binary data file to be sent)::\r\n\r\n    ~/sender $ dd if=/dev/urandom of=data.tx bs=60KB count=1 status=none\r\n    ~/sender $ sha256sum data.tx\r\n    008df57d4f3ed6e7a25d25afd57d04fc73140e8df604685bd34fcab58f5ddc01  data.tx\r\n\r\nStart the receiver (will wait for the sender to start)::\r\n\r\n    ~/receiver $ amodem recv -vv -i data.rx\r\n\r\nStart the sender (will modulate the data and start the transmission)::\r\n\r\n    ~/sender $ amodem send -vv -o data.tx\r\n\r\nA similar log should be emitted by the sender::\r\n\r\n    2015-02-06 18:12:46,222 DEBUG      Audio OFDM MODEM: 48.0 kb/s (64-QAM x 8 carriers) Fs=32.0 kHz\r\n    2015-02-06 18:12:46,222 INFO       PortAudio V19-devel (built Feb 25 2014 21:09:53) loaded\r\n    2015-02-06 18:12:48,297 INFO       Sending 2.150 seconds of training audio\r\n    2015-02-06 18:12:48,297 INFO       Starting modulation\r\n    2015-02-06 18:12:49,303 DEBUG      Sent      6.000 kB\r\n    2015-02-06 18:12:50,296 DEBUG      Sent     12.000 kB\r\n    2015-02-06 18:12:51,312 DEBUG      Sent     18.000 kB\r\n    2015-02-06 18:12:52,290 DEBUG      Sent     24.000 kB\r\n    2015-02-06 18:12:53,299 DEBUG      Sent     30.000 kB\r\n    2015-02-06 18:12:54,299 DEBUG      Sent     36.000 kB\r\n    2015-02-06 18:12:55,306 DEBUG      Sent     42.000 kB\r\n    2015-02-06 18:12:56,296 DEBUG      Sent     48.000 kB\r\n    2015-02-06 18:12:57,311 DEBUG      Sent     54.000 kB\r\n    2015-02-06 18:12:58,293 DEBUG      Sent     60.000 kB\r\n    2015-02-06 18:12:58,514 INFO       Sent 60.000 kB @ 10.201 seconds\r\n    2015-02-06 18:12:59,506 DEBUG      Closing input and output\r\n\r\nA similar log should be emitted by the receiver::\r\n\r\n    2015-02-06 18:12:44,848 DEBUG      Audio OFDM MODEM: 48.0 kb/s (64-QAM x 8 carriers) Fs=32.0 kHz\r\n    2015-02-06 18:12:44,849 INFO       PortAudio V19-devel (built Feb 25 2014 21:09:53) loaded\r\n    2015-02-06 18:12:44,929 DEBUG      AsyncReader thread started\r\n    2015-02-06 18:12:44,930 DEBUG      Skipping 0.100 seconds\r\n    2015-02-06 18:12:45,141 INFO       Waiting for carrier tone: 3.0 kHz\r\n    2015-02-06 18:12:47,846 INFO       Carrier detected at ~2265.0 ms @ 3.0 kHz\r\n    2015-02-06 18:12:47,846 DEBUG      Buffered 1000 ms of audio\r\n    2015-02-06 18:12:48,025 DEBUG      Carrier starts at 2264.000 ms\r\n    2015-02-06 18:12:48,029 DEBUG      Carrier symbols amplitude : 0.573\r\n    2015-02-06 18:12:48,030 DEBUG      Current phase on carrier: 0.061\r\n    2015-02-06 18:12:48,030 DEBUG      Frequency error: -0.009 ppm\r\n    2015-02-06 18:12:48,030 DEBUG      Frequency correction: 0.009 ppm\r\n    2015-02-06 18:12:48,030 DEBUG      Gain correction: 1.746\r\n    2015-02-06 18:12:48,198 DEBUG      Prefix OK\r\n    2015-02-06 18:12:48,866 DEBUG        3.0 kHz: SNR = 34.82 dB\r\n    2015-02-06 18:12:48,866 DEBUG        4.0 kHz: SNR = 36.39 dB\r\n    2015-02-06 18:12:48,867 DEBUG        5.0 kHz: SNR = 37.88 dB\r\n    2015-02-06 18:12:48,867 DEBUG        6.0 kHz: SNR = 38.58 dB\r\n    2015-02-06 18:12:48,867 DEBUG        7.0 kHz: SNR = 38.86 dB\r\n    2015-02-06 18:12:48,867 DEBUG        8.0 kHz: SNR = 38.63 dB\r\n    2015-02-06 18:12:48,867 DEBUG        9.0 kHz: SNR = 38.07 dB\r\n    2015-02-06 18:12:48,868 DEBUG       10.0 kHz: SNR = 37.22 dB\r\n    2015-02-06 18:12:48,869 INFO       Starting demodulation\r\n    2015-02-06 18:12:49,689 DEBUG      Got       6.000 kB, SNR: 41.19 dB, drift: -0.01 ppm\r\n    2015-02-06 18:12:50,659 DEBUG      Got      12.000 kB, SNR: 41.05 dB, drift: -0.00 ppm\r\n    2015-02-06 18:12:51,639 DEBUG      Got      18.000 kB, SNR: 40.96 dB, drift: -0.00 ppm\r\n    2015-02-06 18:12:52,610 DEBUG      Got      24.000 kB, SNR: 41.47 dB, drift: -0.01 ppm\r\n    2015-02-06 18:12:53,610 DEBUG      Got      30.000 kB, SNR: 41.06 dB, drift: -0.00 ppm\r\n    2015-02-06 18:12:54,589 DEBUG      Got      36.000 kB, SNR: 41.37 dB, drift: -0.00 ppm\r\n    2015-02-06 18:12:55,679 DEBUG      Got      42.000 kB, SNR: 41.13 dB, drift: -0.00 ppm\r\n    2015-02-06 18:12:56,650 DEBUG      Got      48.000 kB, SNR: 41.31 dB, drift: -0.00 ppm\r\n    2015-02-06 18:12:57,631 DEBUG      Got      54.000 kB, SNR: 41.23 dB, drift: +0.00 ppm\r\n    2015-02-06 18:12:58,605 DEBUG      Got      60.000 kB, SNR: 41.31 dB, drift: +0.00 ppm\r\n    2015-02-06 18:12:58,857 DEBUG      EOF frame detected\r\n    2015-02-06 18:12:58,857 DEBUG      Demodulated 61.205 kB @ 9.988 seconds (97.9% realtime)\r\n    2015-02-06 18:12:58,858 INFO       Received 60.000 kB @ 9.988 seconds = 6.007 kB/s\r\n    2015-02-06 18:12:58,876 DEBUG      Closing input and output\r\n    2015-02-06 18:12:58,951 DEBUG      AsyncReader thread stopped (read 896000 bytes)\r\n\r\nAfter the receiver has finished, verify the received file's hash::\r\n\r\n    ~/receiver $ sha256sum data.rx\r\n    008df57d4f3ed6e7a25d25afd57d04fc73140e8df604685bd34fcab58f5ddc01  data.rx\r\n\r\nYou can see a video of the data transfer process [here](http://www.youtube.com/watch?v=GZQUtHB8so4).\r\n\r\nVisualization\r\n-------------\r\nMake sure that ``matplotlib`` package is installed, and run (at the receiver side)::\r\n\r\n    ~/receiver $ amodem recv --plot -o data.rx\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}